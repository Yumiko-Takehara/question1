Controllerを実装する
投稿したニュースの一覧を表示するために、NewsController.phpにindexアクションを追加します。

下記の内容で、app/Http/Controllers/Admin/NewsController.php に index Actionを追加してください。

<?php
namespace App\Http\Controllers\Admin;
use Illuminate\Http\Request;
use App\Http\Controllers\Controller;
use App\News;

class NewsController extends Controller
{
  public function add()
  {
      return view('admin.news.create');
  }

  public function create(Request $request)
  {
      // Varidationを行う
      $this->validate($request, News::$rules);
      $news = new News;
      $form = $request->all();

      // formに画像があれば、保存する
      if (isset($form['image'])) {
        $path = $request->file('image')->store('public/image');
        $news->image_path = basename($path);
      } else {
          $news->image_path = null;
      }

      unset($form['_token']);
      unset($form['image']);
      // データベースに保存する
      $news->fill($form);
      $news->save();

      return redirect('admin/news/create');
  }

  // 以下を追記
  public function index(Request $request)
  {
      $cond_title = $request->cond_title;
      if ($cond_title != '') {
          // 検索されたら検索結果を取得する
          $posts = News::where('title', $cond_title)->get();
      } else {
          // それ以外はすべてのニュースを取得する
          $posts = News::all();
      }
      return view('admin.news.index', ['posts' => $posts, 'cond_title' => $cond_title]);
  }

}

Viewを実装する
次は、 resources/views/admin/news/index.blade.php でビューを記載しましょう。

一覧画面のテンプレートを追加します。

下記の内容で resources/views/admin/news/index.blade.php を新規作成して下さい。

@extends('layouts.admin')
@section('title', '登録済みニュースの一覧')

@section('content')
    <div class="container">
        <div class="row">
            <h2>ニュース一覧</h2>
        </div>
        <div class="row">
            <div class="col-md-4">
                <a href="{{ action('Admin\NewsController@add') }}" role="button" class="btn btn-primary">新規作成</a>
            </div>
            <div class="col-md-8">
                <form action="{{ action('Admin\NewsController@index') }}" method="get">
                    <div class="form-group row">
                        <label class="col-md-2">タイトル</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" name="cond_title" value="{{ $cond_title }}">
                        </div>
                        <div class="col-md-2">
                            {{ csrf_field() }}
                            <input type="submit" class="btn btn-primary" value="検索">
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="list-news col-md-12 mx-auto">
                <div class="row">
                    <table class="table table-dark">
                        <thead>
                            <tr>
                                <th width="10%">ID</th>
                                <th width="20%">タイトル</th>
                                <th width="50%">本文</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach($posts as $news)
                                <tr>
                                    <th>{{ $news->id }}</th>
                                    <td>{{ \Str::limit($news->title, 100) }}</td>
                                    <td>{{ \Str::limit($news->body, 250) }}</td>
                                </tr>
                            @endforeach
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
@endsection



Routingを実装する
一覧画面へのルーティングを設定します。

下記の内容を routes/web.php に追記して下さい。

Route::group(['prefix' => 'admin'], function() {
    Route::get('news/create', 'Admin\NewsController@add')->middleware('auth');
    Route::post('news/create', 'Admin\NewsController@create')->middleware('auth');
    Route::get('news', 'Admin\NewsController@index')->middleware('auth'); // 追記
});

確認
Laravelサーバーを起動していない場合は、起動します。

$ cd ~/environment/mynews
$ php artisan serve --port=8080
/admin/news/ にブラウザでアクセスし、次のように表示されていれば成功です。

https://gyazo.com/e501032066810d4043aa192f1072a4b9


ですがここで下記の違う画面が出てログインしようとするとさらに下のエラーが出ます。


https://gyazo.com/5aed2895ab55854be4519780b179c7f6


(2/2) QueryException
SQLSTATE[HY000] [1045] Access denied for user 'Yumiko-Takehara'@'localhost' (using password: YES) (SQL: select * from `users` where `email` = chaomin0122@gmail.com limit 1)

in Connection.php line 647
at Connection->runQueryCallback('select * from `users` where `email` = ? limit 1', array('chaomin0122@gmail.com'), object(Closure))
in Connection.php line 607
at Connection->run('select * from `users` where `email` = ? limit 1', array('chaomin0122@gmail.com'), object(Closure))
in Connection.php line 326
at Connection->select('select * from `users` where `email` = ? limit 1', array('chaomin0122@gmail.com'), true)
in Builder.php line 1705
at Builder->runSelect()
in Builder.php line 1690
at Builder->get(array('*'))
in Builder.php line 462
at Builder->getModels(array('*'))
in Builder.php line 446
at Builder->get(array('*'))
in BuildsQueries.php line 75
at Builder->first()
in EloquentUserProvider.php line 114
at EloquentUserProvider->retrieveByCredentials(array('email' => 'chaomin0122@gmail.com', 'password' => 'peru5768'))
in SessionGuard.php line 352
at SessionGuard->attempt(array('email' => 'chaomin0122@gmail.com', 'password' => 'peru5768'), false)
in AuthenticatesUsers.php line 76
at LoginController->attemptLogin(object(Request))
in AuthenticatesUsers.php line 41
at LoginController->login(object(Request))
at call_user_func_array(array(object(LoginController), 'login'), array(object(Request)))
in Controller.php line 55
at Controller->callAction('login', array(object(Request)))
in ControllerDispatcher.php line 44
at ControllerDispatcher->dispatch(object(Route), object(LoginController), 'login')
in Route.php line 203
at Route->runController()
in Route.php line 160
at Route->run()
in Router.php line 572
at Router->Illuminate\Routing\{closure}(object(Request))
in Pipeline.php line 30
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in RedirectIfAuthenticated.php line 24
at RedirectIfAuthenticated->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in SubstituteBindings.php line 41
at SubstituteBindings->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in VerifyCsrfToken.php line 65
at VerifyCsrfToken->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in ShareErrorsFromSession.php line 49
at ShareErrorsFromSession->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in StartSession.php line 64
at StartSession->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in AddQueuedCookiesToResponse.php line 37
at AddQueuedCookiesToResponse->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in EncryptCookies.php line 59
at EncryptCookies->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in Pipeline.php line 102
at Pipeline->then(object(Closure))
in Router.php line 574
at Router->runRouteWithinStack(object(Route), object(Request))
in Router.php line 533
at Router->dispatchToRoute(object(Request))
in Router.php line 511
at Router->dispatch(object(Request))
in Kernel.php line 176
at Kernel->Illuminate\Foundation\Http\{closure}(object(Request))
in Pipeline.php line 30
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in TransformsRequest.php line 30
at TransformsRequest->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in TransformsRequest.php line 30
at TransformsRequest->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in ValidatePostSize.php line 27
at ValidatePostSize->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in CheckForMaintenanceMode.php line 46
at CheckForMaintenanceMode->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in Pipeline.php line 102
at Pipeline->then(object(Closure))
in Kernel.php line 151
at Kernel->sendRequestThroughRouter(object(Request))
in Kernel.php line 116
at Kernel->handle(object(Request))
in index.php line 53
at require_once('/home/ec2-user/environment/mynews/public/index.php')
in server.php line 21
(1/2) PDOException
SQLSTATE[HY000] [1045] Access denied for user 'Yumiko-Takehara'@'localhost' (using password: YES)

in Connector.php line 68
at PDO->__construct('mysql:host=127.0.0.1;port=3306;dbname=mynews', 'Yumiko-Takehara', 'peru5768', array(0, 2, 0, false, false))
in Connector.php line 68
at Connector->createPdoConnection('mysql:host=127.0.0.1;port=3306;dbname=mynews', 'Yumiko-Takehara', 'peru5768', array(0, 2, 0, false, false))
in Connector.php line 44
at Connector->createConnection('mysql:host=127.0.0.1;port=3306;dbname=mynews', array('driver' => 'mysql', 'host' => '127.0.0.1', 'port' => '3306', 'database' => 'mynews', 'username' => 'Yumiko-Takehara', 'password' => 'peru5768', 'unix_socket' => '', 'charset' => 'utf8mb4', 'collation' => 'utf8mb4_unicode_ci', 'prefix' => '', 'strict' => true, 'engine' => null, 'name' => 'mysql'), array(0, 2, 0, false, false))
in MySqlConnector.php line 24
at MySqlConnector->connect(array('driver' => 'mysql', 'host' => '127.0.0.1', 'port' => '3306', 'database' => 'mynews', 'username' => 'Yumiko-Takehara', 'password' => 'peru5768', 'unix_socket' => '', 'charset' => 'utf8mb4', 'collation' => 'utf8mb4_unicode_ci', 'prefix' => '', 'strict' => true, 'engine' => null, 'name' => 'mysql'))
in ConnectionFactory.php line 183
at ConnectionFactory->Illuminate\Database\Connectors\{closure}()
at call_user_func(object(Closure))
in Connection.php line 883
at Connection->getPdo()
in Connection.php line 904
at Connection->getReadPdo()
in Connection.php line 392
at Connection->getPdoForSelect(true)
in Connection.php line 318
at Connection->Illuminate\Database\{closure}('select * from `users` where `email` = ? limit 1', array('chaomin0122@gmail.com'))
in Connection.php line 640
at Connection->runQueryCallback('select * from `users` where `email` = ? limit 1', array('chaomin0122@gmail.com'), object(Closure))
in Connection.php line 607
at Connection->run('select * from `users` where `email` = ? limit 1', array('chaomin0122@gmail.com'), object(Closure))
in Connection.php line 326
at Connection->select('select * from `users` where `email` = ? limit 1', array('chaomin0122@gmail.com'), true)
in Builder.php line 1705
at Builder->runSelect()
in Builder.php line 1690
at Builder->get(array('*'))
in Builder.php line 462
at Builder->getModels(array('*'))
in Builder.php line 446
at Builder->get(array('*'))
in BuildsQueries.php line 75
at Builder->first()
in EloquentUserProvider.php line 114
at EloquentUserProvider->retrieveByCredentials(array('email' => 'chaomin0122@gmail.com', 'password' => 'peru5768'))
in SessionGuard.php line 352
at SessionGuard->attempt(array('email' => 'chaomin0122@gmail.com', 'password' => 'peru5768'), false)
in AuthenticatesUsers.php line 76
at LoginController->attemptLogin(object(Request))
in AuthenticatesUsers.php line 41
at LoginController->login(object(Request))
at call_user_func_array(array(object(LoginController), 'login'), array(object(Request)))
in Controller.php line 55
at Controller->callAction('login', array(object(Request)))
in ControllerDispatcher.php line 44
at ControllerDispatcher->dispatch(object(Route), object(LoginController), 'login')
in Route.php line 203
at Route->runController()
in Route.php line 160
at Route->run()
in Router.php line 572
at Router->Illuminate\Routing\{closure}(object(Request))
in Pipeline.php line 30
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in RedirectIfAuthenticated.php line 24
at RedirectIfAuthenticated->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in SubstituteBindings.php line 41
at SubstituteBindings->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in VerifyCsrfToken.php line 65
at VerifyCsrfToken->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in ShareErrorsFromSession.php line 49
at ShareErrorsFromSession->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in StartSession.php line 64
at StartSession->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in AddQueuedCookiesToResponse.php line 37
at AddQueuedCookiesToResponse->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in EncryptCookies.php line 59
at EncryptCookies->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in Pipeline.php line 102
at Pipeline->then(object(Closure))
in Router.php line 574
at Router->runRouteWithinStack(object(Route), object(Request))
in Router.php line 533
at Router->dispatchToRoute(object(Request))
in Router.php line 511
at Router->dispatch(object(Request))
in Kernel.php line 176
at Kernel->Illuminate\Foundation\Http\{closure}(object(Request))
in Pipeline.php line 30
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in TransformsRequest.php line 30
at TransformsRequest->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in TransformsRequest.php line 30
at TransformsRequest->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in ValidatePostSize.php line 27
at ValidatePostSize->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in CheckForMaintenanceMode.php line 46
at CheckForMaintenanceMode->handle(object(Request), object(Closure))
in Pipeline.php line 148
at Pipeline->Illuminate\Pipeline\{closure}(object(Request))
in Pipeline.php line 53
at Pipeline->Illuminate\Routing\{closure}(object(Request))
in Pipeline.php line 102
at Pipeline->then(object(Closure))
in Kernel.php line 151
at Kernel->sendRequestThroughRouter(object(Request))
in Kernel.php line 116
at Kernel->handle(object(Request))
in index.php line 53
at require_once('/home/ec2-user/environment/mynews/public/index.php')
in server.php line 21
